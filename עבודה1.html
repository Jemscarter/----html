<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>עבודת סיכום SQL - שאלה 1</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 960px;
            margin: 30px auto;
            padding: 25px;
            background-color: #fff;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        header {
            text-align: center;
            border-bottom: 2px solid #e67e22;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        header h1 {
            color: #d35400;
            margin: 0;
        }

        header p {
            margin: 5px 0 0;
            color: #777;
        }

        section {
            margin-bottom: 40px;
        }

        h2 {
            color: #d35400;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h3 {
            color: #444;
            margin-top: 30px;
        }

        h4 {
            color: #555;
        }

        ol li,
        ul li {
            margin-bottom: 15px;
        }

        strong,
        b {
            color: #333;
        }

        .erd-image {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 15px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .code-container {
            position: relative;
        }

        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            padding-top: 45px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            direction: ltr;
            text-align: left;
        }

        pre .comment {
            color: #7f8c8d;
            font-style: italic;
            direction: rtl;
            text-align: right;
            unicode-bidi: isolate-override;
        }

        pre .comment .ltr {
            direction: ltr;
            unicode-bidi: embed;
            display: inline;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #1a1a1a;
            color: white;
            border: 1px solid #b0b0b0;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }

        .copy-btn:hover {
            background-color: #333;
        }

        .explanation {
            background-color: #fff8e1;
            border-right: 4px solid #f1c40f;
            padding: 10px 20px;
            margin: 15px 0;
            color: #666;
        }

        .explanation b {
            color: #c0392b;
        }

        .ltr {
            direction: ltr;
            display: inline-block;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #999;
            font-size: 0.9em;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>עבודת סיכום SQL - סמסטר אביב 2025</h1>
            <p>שם הסטודנט: ג׳רמי גרסיני, ת.ז. 341094803</p>
        </header>

        <main>
            <section id="question1">
                <h2>פתרון שאלה 1</h2>

                <article id="part1-description">
                    <h3>1. תיאור מסד הנתונים ושאלות המחקר</h3>

                    <h4>נושא מסד הנתונים: ניתוח ביצועי שחקנים ודינמיקת משחק ב-Call of Duty</h4>
                    <p>
                        בפרויקט זה פיתחתי מסד נתונים המתעד את פעילות השחקנים במשחק Call of Duty. המערכת אוספת מידע על
                        השחקנים עצמם, זירות המשחק (המפות), סבבי המשחק שהתקיימו, וכן ביצועי השחקנים בכל סבב. הנתונים
                        נאספו מתוך סביבה תחרותית של משחק מרובה משתתפים, ומטרתם לאפשר ניתוח מעמיק לשיפור חוויית המשחק
                        ומעקב אחר ביצועים.
                    </p>

                    <h4>שאלות המחקר:</h4>
                    <ol>
                        <li>
                            <strong>כיצד משתנה יחס ההריגות אל מול המיתות (<span class="ltr">K/D Ratio</span>) במפות
                                המשחק השונות?</strong>
                            <div class="explanation">
                                <p><b>הסבר למי שאינו גיימר:</b> "יחס הריגות-מיתות" הוא מדד ליעילות השחקן בקרב – כמה
                                    פעמים הוא מצליח להרוג שחקנים אחרים לעומת מספר הפעמים שבהן הוא נהרג בעצמו. "מפת משחק"
                                    מתייחסת לזירה הווירטואלית בה מתקיים הקרב.</p>
                            </div>
                            <p><em>מדוע שאלה זו חשובה?</em> היא מאפשרת לזהות האם עיצוב המפות מאוזן. אם מפה מסוימת מראה
                                באופן עקבי יחס K/D גבוה באופן לא סביר, ייתכן שהיא מעניקה יתרון לא הוגן, מידע קריטי
                                למפתחים לצורך שיפור ואיזון המשחק.</p>
                        </li>
                        <li>
                            <strong>מה השפעת רמת הוותק של שחקן (רמת יוקרה) על יעילותו, הנמדדת כיחס הריגות לדקת
                                משחק?</strong>
                            <div class="explanation">
                                <p><b>הסבר למי שאינו גיימר:</b> "רמת יוקרה" (Prestige Level) מייצגת את דרגת הניסיון
                                    וההתקדמות של השחקן במשחק.</p>
                            </div>
                            <p><em>מדוע שאלה זו חשובה?</em> היא בוחנת האם הניסיון במשחק אכן מתורגם ליעילות קרבית גבוהה
                                יותר. אם לא, יתכן שמערכת הדירוג או שיבוץ השחקנים אינה מאוזנת כראוי, מה שעלול לפגוע
                                במוטיבציה ובחוויית השחקן.</p>
                        </li>
                        <li>
                            <strong>כיצד משפיע סוג המשחק על הקשר בין ביצועים אישיים לבין תוצאות קבוצתיות?</strong>
                            <div class="explanation">
                                <p><b>הסבר למי שאינו גיימר:</b> במשחק קיימים מצבי משחק שונים (Game Modes) בעלי מטרות
                                    משתנות, כגון דגש על הריגות בלבד או שליטה במיקומים אסטרטגיים במפה.</p>
                            </div>
                            <p><em>מדוע שאלה זו חשובה?</em> ניתוח זה מאפשר להבין האם ביצועים אישיים בלבד הם גורם מכריע
                                בניצחון הקבוצה, או שדווקא עבודת צוות ופעולות אסטרטגיות תורמות יותר. תובנה זו חשובה
                                לאיזון משחק ותכנון מערכות ניקוד.</p>
                        </li>
                    </ol>
                </article>

                <article id="part2-erd">
                    <h3>2. דיאגרמת ישויות-קשרים (ERD) והסבר על נורמליזציה</h3>

                    <h4>דיאגרמת ERD:</h4>
                    <p>להלן דיאגרמת הישויות-קשרים (ERD) שתכננתי עבור מסד הנתונים:</p>

                    <img src="שרטוט ERD.png" alt="דיאגרמת ERD של מסד הנתונים" class="erd-image" />

                    <h4>הסבר על הישויות, התכונות והקשרים במודל:</h4>

                    <p>המודל כולל ארבע ישויות עיקריות:</p>
                    <ul>
                        <li><b>שחקנים:</b>
                            <ul>
                                <li>מזהה שחקן (מפתח ראשי, <span class="ltr">INT</span>)</li>
                                <li>שם משתמש ייחודי (<span class="ltr">VARCHAR(50)</span>)</li>
                                <li>רמת יוקרה (<span class="ltr">INT</span>)</li>
                                <li>תאריך הצטרפות (<span class="ltr">DATE</span>)</li>
                            </ul>
                        </li>
                        <li><b>מפות:</b>
                            <ul>
                                <li>מזהה מפה (מפתח ראשי, <span class="ltr">INT</span>)</li>
                                <li>שם מפה (<span class="ltr">VARCHAR(50)</span>)</li>
                                <li>סוג משחק (<span class="ltr">VARCHAR(50)</span>)</li>
                            </ul>
                        </li>
                        <li><b>סבבי משחק:</b>
                            <ul>
                                <li>מזהה סבב (מפתח ראשי, <span class="ltr">INT</span>)</li>
                                <li>מזהה מפה (מפתח זר, <span class="ltr">INT</span>)</li>
                                <li>חותמת זמן (<span class="ltr">DATETIME</span>)</li>
                                <li>משך משחק בדקות (<span class="ltr">INT</span>)</li>
                            </ul>
                        </li>
                        <li><b>ביצועי שחקנים בסבב (טבלת קישור):</b>
                            <ul>
                                <li>מזהה סבב (מפתח משולב, <span class="ltr">INT</span>)</li>
                                <li>מזהה שחקן (מפתח משולב, <span class="ltr">INT</span>)</li>
                                <li>הריגות (<span class="ltr">INT</span>)</li>
                                <li>מיתות (<span class="ltr">INT</span>)</li>
                                <li>תוצאה (<span class="ltr">VARCHAR(20)</span>)</li>
                            </ul>
                        </li>
                    </ul>

                    <p><b>קשרים במודל:</b></p>
                    <p>קשר מרכזי הוא קשר רבים-לרבים (<span class="ltr">N:M</span>) בין שחקנים לסבבי משחק. קשר זה מיושם
                        בטבלת הקישור "ביצועי שחקנים בסבב". בנוסף קיימים קשרי אחד-לרבים (<span class="ltr">1:M</span>)
                        חשובים:</p>
                    <ul>
                        <li>מפה אחת משמשת מספר סבבי משחק.</li>
                        <li>סבב אחד כולל מספר שחקנים.</li>
                        <li>שחקן אחד יכול להשתתף במספר סבבים.</li>
                    </ul>
                    <div class="explanation" style="margin-top: 15px;">
                        <p><b style="color: #c0392b;">הסבר על נורמליזציה:</b></p>

                        <p>המודל המוצע תוכנן בקפידה תוך יישום עקרונות הנורמליזציה שנלמדו בקורס, במטרה להבטיח שלמות
                            נתונים, למנוע כפילויות ולספק בסיס איתן לניתוחים.</p>

                        <p><b>צורה נורמלית ראשונה (1NF):</b> כל טבלה עומדת בכלל זה. לכל טבלה יש מפתח ראשי המבטיח זיהוי
                            ייחודי לכל שורה, וכל עמודה מכילה ערכים אטומיים בלבד (למשל, אין רשימת שחקנים בתא אחד).</p>

                        <p><b>צורה נורמלית שנייה (2NF):</b> המודל עומד בכלל זה מכיוון שאין תלויות חלקיות. בטבלה
                            <code>ביצועי שחקנים בסבב</code>, שלה מפתח מורכב (<code>מזהה סבב</code> +
                            <code>מזהה שחקן</code>), כל התכונות (הריגות, מיתות, תוצאה) תלויות באופן מלא בשני חלקי המפתח
                            יחד, ולא רק באחד מהם.</p>

                        <p><b>צורה נורמלית שלישית (3NF):</b> המודל עומד בכלל זה מכיוון שנמנעו תלויות טרנזיטיביות. כל
                            תכונה שאינה מפתח תלויה ישירות במפתח הראשי בלבד. לדוגמה:</p>
                        <ul>
                            <li>שם המשתמש של השחקן שמור רק בטבלת <code>שחקנים</code> ותלוי ישירות במזהה השחקן. הוא אינו
                                משוכפל בטבלת הביצועים, מה שמונע אנומליות עדכון.</li>
                            <li>באופן דומה, פרטי המפה (<code>שם מפה</code>, <code>סוג משחק</code>) שמורים רק בטבלת
                                <code>מפות</code> ותלויים במזהה המפה.</li>
                        </ul>

                        <p><b>ישות מקשרת (Associative Entity):</b> קשר הרבים-לרבים (N:M) בין שחקנים לסבבי משחק מומש
                            כהלכה באמצעות טבלת הקישור <code>ביצועי שחקנים בסבב</code>. טבלה זו לא רק מקשרת בין הישויות,
                            אלא גם מכילה תכונות המתארות את הקשר עצמו (כמו מספר ההריגות והתוצאה).</p>
                    </div>

                </article>

                <article id="part3-sql">
                    <h3>3. קוד SQL להקמת מסד הנתונים</h3>
                    <p>
                        להלן קוד ה-SQL המלא להקמת מסד הנתונים. הקוד כולל הערות מפורטות שמסבירות את ההחלטות התכנוניות
                        המרכזיות. ניתן להעתיק ולהריץ אותו ישירות במערכת MySQL.
                    </p>
                    <div class="code-container">
                        <button class="copy-btn" onclick="copySqlCode()">להעתיק את הקוד</button>
                        <pre><code id="sqlCodeBlock"><span class="comment">-- חלק א': יצירת מסד הנתונים והגדרתו לשימוש</span>
CREATE DATABASE IF NOT EXISTS COD_Analytics;
USE COD_Analytics;

<span class="comment">-- חלק ב': יצירת הטבלאות עם מפתחות, אילוצים וקשרים</span>

<span class="comment">-- טבלה 1: שחקנים (Players)
-- טבלה זו מרכזת את כל המידע הסטטי על המשתמשים.</span>
CREATE TABLE Players (
    <span class="comment">-- מפתח ראשי מלאכותי (Surrogate Key) המבטיח זיהוי ייחודי ומאפשר שינוי שם משתמש.
    -- AUTO_INCREMENT מגדיר מספור אוטומטי לכל שחקן חדש.</span>
    PlayerID INT NOT NULL AUTO_INCREMENT,
    <span class="comment">-- VARCHAR(50) הוא אורך סביר לשם משתמש.
    -- אילוץ UNIQUE מבטיח שאין שני שחקנים עם אותו שם משתמש.</span>
    Username VARCHAR(50) NOT NULL UNIQUE,
    PrestigeLevel INT NOT NULL,
    JoinDate DATE,
    PRIMARY KEY (PlayerID)
);

<span class="comment">-- טבלה 2: מפות (Maps)
-- זוהי טבלת ייחוס (Lookup Table) המכילה את כל המפות וסוגי המשחק האפשריים.</span>
CREATE TABLE Maps (
    MapID INT NOT NULL AUTO_INCREMENT,
    MapName VARCHAR(50) NOT NULL,
    GameMode VARCHAR(50) NOT NULL,
    PRIMARY KEY (MapID)
);

<span class="comment">-- טבלה 3: סבבי משחק (GameSessions)
-- טבלה זו מתעדת כל משחק שהתרחש כיחידה עצמאית.</span>
CREATE TABLE GameSessions (
    SessionID INT NOT NULL AUTO_INCREMENT,
    <span class="comment">-- מפתח זר המבטיח "שלמות ייחוסית" (Referential Integrity):
    -- לא ניתן ליצור סבב משחק עבור מפה שאינה קיימת בטבלת Maps.</span>
    MapID INT NOT NULL,
    <span class="comment">-- DATETIME שומר את התאריך והשעה המדויקים של תחילת הסבב.</span>
    SessionTimestamp DATETIME NOT NULL,
    SessionDurationMinutes INT NOT NULL,
    PRIMARY KEY (SessionID),
    FOREIGN KEY (MapID) REFERENCES Maps(MapID)
);

<span class="comment">-- טבלה 4: ביצועי שחקנים בסבב (PlayerPerformance)
-- טבלת קישור הפותרת את קשר הרבים-לרבים (N:M) בין שחקנים לסבבי משחק.</span>
CREATE TABLE PlayerPerformance (
    SessionID INT NOT NULL,
    PlayerID INT NOT NULL,
    <span class="comment">-- DEFAULT 0 מונע ערכי NULL ומקל על חישובים.
    -- אם שחקן הצטרף ולא ביצע כלום, הביצועים שלו הם 0 ולא "לא ידוע".</span>
    Kills INT NOT NULL DEFAULT 0,
    Deaths INT NOT NULL DEFAULT 0,
    <span class="comment">-- התוצאה יכולה להיות NULL במקרה שהמשחק לא הסתיים או שהשחקן יצא באמצע.
    -- NULL מייצג כאן "ערך לא ידוע" או "לא רלוונטי", וזו המשמעות הנכונה במקרה זה.</span>
    Result VARCHAR(20),
    <span class="comment">-- מפתח מורכב המזהה באופן ייחודי ביצועים של שחקן בסבב משחק ספציפי.</span>
    PRIMARY KEY (SessionID, PlayerID),
    FOREIGN KEY (SessionID) REFERENCES GameSessions(SessionID),
    FOREIGN KEY (PlayerID) REFERENCES Players(PlayerID)
);

<span class="comment">-- חלק ג': הכנסת נתונים לדוגמה (5 רשומות לכל טבלה)
-- הנתונים מכבדים את כל אילוצי המפתחות הזרים.</span>

<span class="comment">-- הכנסת נתונים לטבלת Players</span>
INSERT INTO Players (Username, PrestigeLevel, JoinDate) VALUES
('IsraeliSniper1', 85, '2022-03-15'),
('IDF_fury99', 62, '2021-11-20'),
('Golani101', 100, '2020-05-10'),
('Galil26', 68, '2023-01-25'),
('John_Wick111', 95, '2019-08-01');

<span class="comment">-- הכנסת נתונים לטבלת Maps</span>
INSERT INTO Maps (MapName, GameMode) VALUES
('Nuketown', 'Team Deathmatch'),
('Crash', 'Domination'),
('Shipment', 'Hardpoint'),
('Rust', 'Team Deathmatch'),
('Hackney Yard', 'Search and Destroy');

<span class="comment">-- הכנסת נתונים לטבלת GameSessions</span>
INSERT INTO GameSessions (MapID, SessionTimestamp, SessionDurationMinutes) VALUES
(1, '2025-06-01 18:30:00', 10),
(3, '2025-06-01 19:00:00', 12),
(2, '2025-06-02 20:00:00', 15),
(4, '2025-06-02 21:15:00', 8),
(5, '2025-06-03 17:45:00', 20);

<span class="comment">-- הכנסת נתונים לטבלת PlayerPerformance</span>
INSERT INTO PlayerPerformance (SessionID, PlayerID, Kills, Deaths, Result) VALUES
(1, 1, 25, 10, 'Victory'),
(1, 2, 18, 15, 'Victory'),
(2, 3, 30, 5, 'Defeat'),
(3, 1, 22, 12, 'Victory'),
(4, 4, 15, 8, 'Defeat');
</code></pre>
                    </div>
                </article>
            </section>
        </main>

        <footer>
            <p>עבודת סיכום בקורס מסדי נתונים ו-SQL | אוניברסיטת בר-אילן, 2025
                <br />
                האתר תוכנת על ידי ג׳מיניי והועלה לגיטהאב
            </p>
        </footer>
    </div>

    <script>
        function copySqlCode() {
            const codeBlock = document.getElementById('sqlCodeBlock');
            const codeToCopy = codeBlock.textContent || codeBlock.innerText;

            navigator.clipboard.writeText(codeToCopy).then(() => {
                alert('הקוד הועתק בהצלחה!');
            }).catch(err => {
                console.error('אירעה שגיאה בעת העתקת הקוד: ', err);
                alert('נכשל בהעתקת הקוד.');
            });
        }
    </script>

</body>

</html>